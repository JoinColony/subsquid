module.exports = class Data1695805214630 {
    name = 'Data1695805214630'

    async up(db) {
        await db.query(`CREATE TABLE "token" ("id" character varying NOT NULL, "decimals" numeric, "symbol" text, CONSTRAINT "PK_82fae97f905930df5d62a702fc9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "block" ("id" character varying NOT NULL, "timestamp" numeric, CONSTRAINT "PK_d0925763efb591c2e2ffb267572" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "transaction" ("id" character varying NOT NULL, "block_id" character varying, CONSTRAINT "PK_89eadb93a89810556e1cbcd6ab9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c0e1460f3c9eee975fee81002d" ON "transaction" ("block_id") `)
        await db.query(`CREATE TABLE "domain_metadata" ("id" character varying NOT NULL, "metadata" text, "domain_id" character varying, "transaction_id" character varying, CONSTRAINT "PK_aab74e947478e84cc2854a1ed3d" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_b7db162415aa5bdcc0530fd852" ON "domain_metadata" ("domain_id") `)
        await db.query(`CREATE INDEX "IDX_bfcab42ab5d24792d1dddfab1f" ON "domain_metadata" ("transaction_id") `)
        await db.query(`CREATE TABLE "global_skill" ("id" character varying NOT NULL, "skill_chain_id" numeric NOT NULL, "domain_id" text, "parent_id" character varying, CONSTRAINT "PK_a5f604ceff88cbe9fbb6f94a357" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c68dea178397178d93ac5e24ab" ON "global_skill" ("parent_id") `)
        await db.query(`CREATE TABLE "domain" ("id" character varying NOT NULL, "domain_chain_id" numeric NOT NULL, "name" text, "colony_address" text, "metadata" text, "parent_id" character varying, "skill_id" character varying, "colony_id" character varying, CONSTRAINT "PK_27e3ec3ea0ae02c8c5bceab3ba9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7d85eb18ed8935de858c8a3f22" ON "domain" ("parent_id") `)
        await db.query(`CREATE INDEX "IDX_e58480fa97d6c555c4c1812b37" ON "domain" ("skill_id") `)
        await db.query(`CREATE INDEX "IDX_07516b6de08c334fbd4c40a13f" ON "domain" ("colony_id") `)
        await db.query(`CREATE TABLE "colony_metadata" ("id" character varying NOT NULL, "metadata" text, "colony_id" character varying, "transaction_id" character varying, CONSTRAINT "PK_36f728279eb572a04a3204f34d0" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_1a3b78d1ad7740530de70b60e5" ON "colony_metadata" ("colony_id") `)
        await db.query(`CREATE INDEX "IDX_aa6f48605cab9a44fb258eb790" ON "colony_metadata" ("transaction_id") `)
        await db.query(`CREATE TABLE "colony_extension" ("id" character varying NOT NULL, "hash" text NOT NULL, "colony_id" character varying, CONSTRAINT "PK_1fcc79f5a6dbf4e9fd0161b6d86" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_b814d4f2cecd71e45ea481b4d9" ON "colony_extension" ("colony_id") `)
        await db.query(`CREATE TABLE "colony" ("id" character varying NOT NULL, "ens_name" text, "orbit_address" text, "colony_chain_id" numeric NOT NULL, "metadata" text, "token_id" character varying, CONSTRAINT "PK_1da59a74da5be35e595553e03d6" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_ca03da4f653a298ff1f0aae539" ON "colony" ("token_id") `)
        await db.query(`CREATE TABLE "funding_pot_payout" ("id" character varying NOT NULL, "amount" numeric, "funding_pot_chain_id" numeric, "token_id" character varying, "funding_pot_id" character varying, CONSTRAINT "PK_7e0230f3b41addc761373f0a3f6" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7f643bb8c56a4f0c7e7e3e1536" ON "funding_pot_payout" ("token_id") `)
        await db.query(`CREATE INDEX "IDX_f891f90b214cfced4a38cf5c77" ON "funding_pot_payout" ("funding_pot_id") `)
        await db.query(`CREATE TABLE "funding_pot" ("id" character varying NOT NULL, CONSTRAINT "PK_36f882bec2df897e3f5081728b3" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "payment" ("id" character varying NOT NULL, "to" text, "payment_chain_id" numeric, "domain_id" character varying, "colony_id" character varying, "funding_pot_id" character varying, CONSTRAINT "PK_fcaec7df5adf9cac408c686b2ab" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_d7a74e3794884ef420935bbddc" ON "payment" ("domain_id") `)
        await db.query(`CREATE INDEX "IDX_484276477eeead5e2f1e63c84a" ON "payment" ("colony_id") `)
        await db.query(`CREATE INDEX "IDX_1e535d02768254a26e436dcc13" ON "payment" ("funding_pot_id") `)
        await db.query(`CREATE TABLE "expenditure" ("id" character varying NOT NULL, CONSTRAINT "PK_1c52384775d22bfcd87d886d502" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "one_tx_payment" ("id" character varying NOT NULL, "fundamental_chain_id" numeric, "timestamp" numeric, "n_payouts" numeric, "agent" text, "domain_id" character varying, "transaction_id" character varying, "expenditure_id" character varying, "payment_id" character varying, CONSTRAINT "PK_5f1f43eecf79ff80e0d33579eba" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_f6f8823ffcab3f28040935d604" ON "one_tx_payment" ("domain_id") `)
        await db.query(`CREATE INDEX "IDX_cd9b784ec10de5f210fc9df448" ON "one_tx_payment" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_65704cb8755f0688ba5a54fcab" ON "one_tx_payment" ("expenditure_id") `)
        await db.query(`CREATE INDEX "IDX_444d983285239dc5144f8430cc" ON "one_tx_payment" ("payment_id") `)
        await db.query(`CREATE TABLE "event" ("id" character varying NOT NULL, "timestamp" numeric, "address" text, "name" text, "args" text, "domain_id" character varying, "transaction_id" character varying, "associated_colony_id" character varying, CONSTRAINT "PK_30c2f3bbaf6d34a55f8ae6e4614" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_9af6b25cc628a716961854ee3d" ON "event" ("domain_id") `)
        await db.query(`CREATE INDEX "IDX_036de8e23f40b48f0b672e2a2b" ON "event" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_50ac4ad66a37ee173cd25ad8ae" ON "event" ("associated_colony_id") `)
        await db.query(`CREATE TABLE "motion" ("id" character varying NOT NULL, "fundamental_chain_id" numeric, "action" text, "extension_address" text, "agent" text, "stakes" text array, "required_stake" numeric, "escalated" boolean, "timestamp" numeric, "associated_colony_id" character varying, "transaction_id" character varying, "domain_id" character varying, CONSTRAINT "PK_6b577ebda54089e75b75f98058d" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_91e85515f6273a717a805fc110" ON "motion" ("associated_colony_id") `)
        await db.query(`CREATE INDEX "IDX_11b6403f097366d9a2049772c4" ON "motion" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_6584817b3eae3066a362c86fea" ON "motion" ("domain_id") `)
        await db.query(`CREATE TABLE "coin_machine_period" ("id" character varying NOT NULL, "sale_ended_at" numeric NOT NULL, "colony_address" text NOT NULL, "tokens_bought" numeric, "price" numeric, CONSTRAINT "PK_63599c3c0ea9e246e904373a0a1" PRIMARY KEY ("id"))`)
        await db.query(`ALTER TABLE "transaction" ADD CONSTRAINT "FK_c0e1460f3c9eee975fee81002dc" FOREIGN KEY ("block_id") REFERENCES "block"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "domain_metadata" ADD CONSTRAINT "FK_b7db162415aa5bdcc0530fd852b" FOREIGN KEY ("domain_id") REFERENCES "domain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "domain_metadata" ADD CONSTRAINT "FK_bfcab42ab5d24792d1dddfab1f3" FOREIGN KEY ("transaction_id") REFERENCES "transaction"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "global_skill" ADD CONSTRAINT "FK_c68dea178397178d93ac5e24abe" FOREIGN KEY ("parent_id") REFERENCES "global_skill"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "domain" ADD CONSTRAINT "FK_7d85eb18ed8935de858c8a3f222" FOREIGN KEY ("parent_id") REFERENCES "domain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "domain" ADD CONSTRAINT "FK_e58480fa97d6c555c4c1812b374" FOREIGN KEY ("skill_id") REFERENCES "global_skill"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "domain" ADD CONSTRAINT "FK_07516b6de08c334fbd4c40a13fd" FOREIGN KEY ("colony_id") REFERENCES "colony"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "colony_metadata" ADD CONSTRAINT "FK_1a3b78d1ad7740530de70b60e5f" FOREIGN KEY ("colony_id") REFERENCES "colony"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "colony_metadata" ADD CONSTRAINT "FK_aa6f48605cab9a44fb258eb790f" FOREIGN KEY ("transaction_id") REFERENCES "transaction"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "colony_extension" ADD CONSTRAINT "FK_b814d4f2cecd71e45ea481b4d92" FOREIGN KEY ("colony_id") REFERENCES "colony"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "colony" ADD CONSTRAINT "FK_ca03da4f653a298ff1f0aae5394" FOREIGN KEY ("token_id") REFERENCES "token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "funding_pot_payout" ADD CONSTRAINT "FK_7f643bb8c56a4f0c7e7e3e1536f" FOREIGN KEY ("token_id") REFERENCES "token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "funding_pot_payout" ADD CONSTRAINT "FK_f891f90b214cfced4a38cf5c777" FOREIGN KEY ("funding_pot_id") REFERENCES "funding_pot"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "payment" ADD CONSTRAINT "FK_d7a74e3794884ef420935bbddc2" FOREIGN KEY ("domain_id") REFERENCES "domain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "payment" ADD CONSTRAINT "FK_484276477eeead5e2f1e63c84ad" FOREIGN KEY ("colony_id") REFERENCES "colony"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "payment" ADD CONSTRAINT "FK_1e535d02768254a26e436dcc139" FOREIGN KEY ("funding_pot_id") REFERENCES "funding_pot"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "one_tx_payment" ADD CONSTRAINT "FK_f6f8823ffcab3f28040935d604c" FOREIGN KEY ("domain_id") REFERENCES "domain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "one_tx_payment" ADD CONSTRAINT "FK_cd9b784ec10de5f210fc9df448f" FOREIGN KEY ("transaction_id") REFERENCES "transaction"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "one_tx_payment" ADD CONSTRAINT "FK_65704cb8755f0688ba5a54fcabb" FOREIGN KEY ("expenditure_id") REFERENCES "expenditure"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "one_tx_payment" ADD CONSTRAINT "FK_444d983285239dc5144f8430cc4" FOREIGN KEY ("payment_id") REFERENCES "payment"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event" ADD CONSTRAINT "FK_9af6b25cc628a716961854ee3dc" FOREIGN KEY ("domain_id") REFERENCES "domain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event" ADD CONSTRAINT "FK_036de8e23f40b48f0b672e2a2b6" FOREIGN KEY ("transaction_id") REFERENCES "transaction"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event" ADD CONSTRAINT "FK_50ac4ad66a37ee173cd25ad8aea" FOREIGN KEY ("associated_colony_id") REFERENCES "colony"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "motion" ADD CONSTRAINT "FK_91e85515f6273a717a805fc1106" FOREIGN KEY ("associated_colony_id") REFERENCES "colony"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "motion" ADD CONSTRAINT "FK_11b6403f097366d9a2049772c49" FOREIGN KEY ("transaction_id") REFERENCES "transaction"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "motion" ADD CONSTRAINT "FK_6584817b3eae3066a362c86feaa" FOREIGN KEY ("domain_id") REFERENCES "domain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "token"`)
        await db.query(`DROP TABLE "block"`)
        await db.query(`DROP TABLE "transaction"`)
        await db.query(`DROP INDEX "public"."IDX_c0e1460f3c9eee975fee81002d"`)
        await db.query(`DROP TABLE "domain_metadata"`)
        await db.query(`DROP INDEX "public"."IDX_b7db162415aa5bdcc0530fd852"`)
        await db.query(`DROP INDEX "public"."IDX_bfcab42ab5d24792d1dddfab1f"`)
        await db.query(`DROP TABLE "global_skill"`)
        await db.query(`DROP INDEX "public"."IDX_c68dea178397178d93ac5e24ab"`)
        await db.query(`DROP TABLE "domain"`)
        await db.query(`DROP INDEX "public"."IDX_7d85eb18ed8935de858c8a3f22"`)
        await db.query(`DROP INDEX "public"."IDX_e58480fa97d6c555c4c1812b37"`)
        await db.query(`DROP INDEX "public"."IDX_07516b6de08c334fbd4c40a13f"`)
        await db.query(`DROP TABLE "colony_metadata"`)
        await db.query(`DROP INDEX "public"."IDX_1a3b78d1ad7740530de70b60e5"`)
        await db.query(`DROP INDEX "public"."IDX_aa6f48605cab9a44fb258eb790"`)
        await db.query(`DROP TABLE "colony_extension"`)
        await db.query(`DROP INDEX "public"."IDX_b814d4f2cecd71e45ea481b4d9"`)
        await db.query(`DROP TABLE "colony"`)
        await db.query(`DROP INDEX "public"."IDX_ca03da4f653a298ff1f0aae539"`)
        await db.query(`DROP TABLE "funding_pot_payout"`)
        await db.query(`DROP INDEX "public"."IDX_7f643bb8c56a4f0c7e7e3e1536"`)
        await db.query(`DROP INDEX "public"."IDX_f891f90b214cfced4a38cf5c77"`)
        await db.query(`DROP TABLE "funding_pot"`)
        await db.query(`DROP TABLE "payment"`)
        await db.query(`DROP INDEX "public"."IDX_d7a74e3794884ef420935bbddc"`)
        await db.query(`DROP INDEX "public"."IDX_484276477eeead5e2f1e63c84a"`)
        await db.query(`DROP INDEX "public"."IDX_1e535d02768254a26e436dcc13"`)
        await db.query(`DROP TABLE "expenditure"`)
        await db.query(`DROP TABLE "one_tx_payment"`)
        await db.query(`DROP INDEX "public"."IDX_f6f8823ffcab3f28040935d604"`)
        await db.query(`DROP INDEX "public"."IDX_cd9b784ec10de5f210fc9df448"`)
        await db.query(`DROP INDEX "public"."IDX_65704cb8755f0688ba5a54fcab"`)
        await db.query(`DROP INDEX "public"."IDX_444d983285239dc5144f8430cc"`)
        await db.query(`DROP TABLE "event"`)
        await db.query(`DROP INDEX "public"."IDX_9af6b25cc628a716961854ee3d"`)
        await db.query(`DROP INDEX "public"."IDX_036de8e23f40b48f0b672e2a2b"`)
        await db.query(`DROP INDEX "public"."IDX_50ac4ad66a37ee173cd25ad8ae"`)
        await db.query(`DROP TABLE "motion"`)
        await db.query(`DROP INDEX "public"."IDX_91e85515f6273a717a805fc110"`)
        await db.query(`DROP INDEX "public"."IDX_11b6403f097366d9a2049772c4"`)
        await db.query(`DROP INDEX "public"."IDX_6584817b3eae3066a362c86fea"`)
        await db.query(`DROP TABLE "coin_machine_period"`)
        await db.query(`ALTER TABLE "transaction" DROP CONSTRAINT "FK_c0e1460f3c9eee975fee81002dc"`)
        await db.query(`ALTER TABLE "domain_metadata" DROP CONSTRAINT "FK_b7db162415aa5bdcc0530fd852b"`)
        await db.query(`ALTER TABLE "domain_metadata" DROP CONSTRAINT "FK_bfcab42ab5d24792d1dddfab1f3"`)
        await db.query(`ALTER TABLE "global_skill" DROP CONSTRAINT "FK_c68dea178397178d93ac5e24abe"`)
        await db.query(`ALTER TABLE "domain" DROP CONSTRAINT "FK_7d85eb18ed8935de858c8a3f222"`)
        await db.query(`ALTER TABLE "domain" DROP CONSTRAINT "FK_e58480fa97d6c555c4c1812b374"`)
        await db.query(`ALTER TABLE "domain" DROP CONSTRAINT "FK_07516b6de08c334fbd4c40a13fd"`)
        await db.query(`ALTER TABLE "colony_metadata" DROP CONSTRAINT "FK_1a3b78d1ad7740530de70b60e5f"`)
        await db.query(`ALTER TABLE "colony_metadata" DROP CONSTRAINT "FK_aa6f48605cab9a44fb258eb790f"`)
        await db.query(`ALTER TABLE "colony_extension" DROP CONSTRAINT "FK_b814d4f2cecd71e45ea481b4d92"`)
        await db.query(`ALTER TABLE "colony" DROP CONSTRAINT "FK_ca03da4f653a298ff1f0aae5394"`)
        await db.query(`ALTER TABLE "funding_pot_payout" DROP CONSTRAINT "FK_7f643bb8c56a4f0c7e7e3e1536f"`)
        await db.query(`ALTER TABLE "funding_pot_payout" DROP CONSTRAINT "FK_f891f90b214cfced4a38cf5c777"`)
        await db.query(`ALTER TABLE "payment" DROP CONSTRAINT "FK_d7a74e3794884ef420935bbddc2"`)
        await db.query(`ALTER TABLE "payment" DROP CONSTRAINT "FK_484276477eeead5e2f1e63c84ad"`)
        await db.query(`ALTER TABLE "payment" DROP CONSTRAINT "FK_1e535d02768254a26e436dcc139"`)
        await db.query(`ALTER TABLE "one_tx_payment" DROP CONSTRAINT "FK_f6f8823ffcab3f28040935d604c"`)
        await db.query(`ALTER TABLE "one_tx_payment" DROP CONSTRAINT "FK_cd9b784ec10de5f210fc9df448f"`)
        await db.query(`ALTER TABLE "one_tx_payment" DROP CONSTRAINT "FK_65704cb8755f0688ba5a54fcabb"`)
        await db.query(`ALTER TABLE "one_tx_payment" DROP CONSTRAINT "FK_444d983285239dc5144f8430cc4"`)
        await db.query(`ALTER TABLE "event" DROP CONSTRAINT "FK_9af6b25cc628a716961854ee3dc"`)
        await db.query(`ALTER TABLE "event" DROP CONSTRAINT "FK_036de8e23f40b48f0b672e2a2b6"`)
        await db.query(`ALTER TABLE "event" DROP CONSTRAINT "FK_50ac4ad66a37ee173cd25ad8aea"`)
        await db.query(`ALTER TABLE "motion" DROP CONSTRAINT "FK_91e85515f6273a717a805fc1106"`)
        await db.query(`ALTER TABLE "motion" DROP CONSTRAINT "FK_11b6403f097366d9a2049772c49"`)
        await db.query(`ALTER TABLE "motion" DROP CONSTRAINT "FK_6584817b3eae3066a362c86feaa"`)
    }
}
